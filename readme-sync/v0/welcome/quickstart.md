---
title: "Quickstart"
hidden: false
---



Get structured data from an auto insurance quote
===

Let's get started with SenseML, a JSON-formatted query language for extracting information from PDFs. SenseML is powered by a mix of techniques, including machine learning, heuristics, and good old-fashioned rules.

If you can write basic SQL queries, you can write SenseML queries! SenseML shields you from the underlying complexities of PDFs, so you can  write queries that are visually and logically clear to a human programmer.

 In this quickstart, you'll write a collection of queries ( a "config") to extract structured data from auto insurance quotes and integrate Sensible with your application.

Get an account
====
1. You'll need an account.  Get one at [Sensible.so](https://www.sensible.so/get-early-access).  If you don't have an account, you can still read along to get a rough idea of how things work.

2. Log into the Sensible app at [app.sensible.so](https://app.sensible.so/) using your API key.

Create the config
====

1. Click **Create document type** and name  it "auto_insurance_quote". Leave the defaults and click **Create**.

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_doc_type.png)

2. Download the following PDF document:

    [auto_insurance_anyco_golden](https://github.com/sensible-hq/sensible-docs/blob/main/readme-sync/assets/pdfs/auto_insurance_anyco_golden.pdf)

3. Click **Upload document**  and choose the generic car insurance quote you just downloaded.

4. Click **Create configuration**, name  it "anyco" (for the fictional company providing the quote), and click **Create**.

5. Click the configuration name to edit the configuration:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_click_config.png)

When the configuration opens, you see an empty config pane on the left, the PDF in the middle, and an empty output pane on the right:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_blank_config.png)

6. For this quickstart, let's extract only a few pieces of information:

  - the policy number
  - the policy period
  - the premium for comprehensive insurance

7. Paste in this config in the left pane in the editor to extract the data:

 ```json
 {
   "fields": [
     {
       "id": "policy_period",
       "anchor": "policy period",
       "method": {
         "id": "label",
         "position": "right"
       }
     },
     {
       "id": "comprehensive_premium",
       "anchor": "comprehensive",
       "type": "currency",
       "method": {
         "id": "row",
         "tiebreaker": "second"
       }
     },
     {
       "id": "policy_number",
       "anchor": {
         "match": [
           {
             "text": "policy number",
             "type": "startsWith"
           }
         ]
       },
       "method": {
         "id": "box"
       }
     }
   ]
 }
 ```

7. Click **Publish** to publish the config.

The following image shows this example in the Sensible app:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_config_1.png)   

You should see the following extracted data in the right pane:

   ```json
   {
     "policy_number": {
       "type": "string",
       "value": "123456789"
     },
     "policy_period": {
       "type": "string",
       "value": " April 14, 2021 - Oct 14, 2021"
     },
     "comprehensive_premium": {
       "source": "$150",
       "value": 150,
       "unit": "$",
       "type": "currency"
     }
   }
   ```

   

Congratulations! You've just created your first config!  If you want to process car insurance quotes generated by a different company, you can create a new config and upload a new "golden" PDF. 

How it works
====


- Each "field" is a basic query unit in SenseML, and the field `id` is used as the key in the key/value JSON output. For example, if you define a field with `"id":""`  For more information, see [Field](doc:field-query-object).
- SenseML searches first for a text "anchor" because it's a computationally quick and inexpensive way to narrow down the location in the document where you want to extract data. Then, SenseML uses a "method" to expand out from the anchor and grab the data you want. For more information about defining complex anchors, see [Anchor](doc:anchor-object). This config uses three types of methods:

  - [Label method](doc:quickstart#section-label-method)
  - [Row method](doc:quickstart#section-row-method)
  - [Box method](doc:quickstart#section-box-method)



Label method
----

To grab the policy period, the config uses the [Label method](doc:label). This tells SenseML that:

-  the anchor (`"policy period"`) is text that is pretty close to some other text. (The "closeness" of text is something you can configure with a preprocessor.)
-  SenseML should grab the nearest text to the label in the position specified (`right`).  

For this text:
![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_label_right.png)

The config uses this Field query:

```json
      {
        "id": "policy_period",
        "anchor": "policy period:",
        "method": {
          "id": "label",
          "position": "right"
        }
      }
```

This returns:

```json
    "policy_period": {
      "type": "string",
      "value": " April 14, 2021 - Oct 14, 2021"
     }   
```

You can grab text to the right, left, above, or below a label. For example, how would you use a label to grab the driver's name? Try it out.

Key concepts: lines
----

See those gray boxes around the text in the following image?

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_concept_1.png)

Each gray box is a line. Lines are defined by whitespace, so multiple "lines" can occupy the same x-axis.  These gray boxes are called "bounding boxes" for the lines because they define the line boundaries.

The Label method can operate within a single line, or across multiple lines. So looking at the previous image, we might think we could use "Bodily injury" as the anchor text and return "$25,000 each"  for an insurance limit, right? Why wouldn't something like this work?  

    {
    	"id": "doesnt_work_returns_null",
    	"anchor": "bodily injury",
    	"method": {
    		"id": "label",
    		"position": "right"
    	}
    }

Try it, and you'll see it doesn't work.

This is because the Label method works only for closely proximate lines (sensitive to spacing and font size), or for text in the same line. In this case, the problem is that the gap between the two lines of text is too big:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_concept_2.png)

 Let's take a look at a purpose-built Row method instead to grab text in a table. 

Row method
----

To grab the comprehensive coverage premium, the config uses the [Row method](doc:row). This tells SenseML that:

- The anchor (`"comprehensive"`) is part of a row in a table (`"id": "row"`).
- SenseML should grab the second element (`"tiebreaker": "second"`).  The tiebreaker lets you select which element in the row you want and can include maximums and minimums (`<` and `>`). 
- The returned value is a currency (`"type": "currency"`). For other data types you can define, see [Field query object](doc:field-query-object).
- It's not shown, but the default behavior is to grab elements to the right of the anchor  in the row (`"position":"right"`). 

To grab this premium of $150:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_row.png)
The config uses this Field query:

```json
      {
      	"id": "comprehensive_premium",
      	"anchor": "comprehensive",
      	"type": "currency",
      	"method": {
      		"id": "row",
      		"tiebreaker": "second",
      	}
      }
```

This returns: 

```json
    "comprehensive_premium": {
      "source": "$150",
      "value": 150,
      "unit": "$",
      "type": "currency"
    }
```

Key concepts: visualize anchors and matches
----

In the app, you can visually inspect anchors and matches by looking at their color coding.

Anchor lines are surrounded by orange boxes, and matches are surrounded by blue boxes:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_concept_3.png)

But wait!  You might have some questions:

- Why are all the lines in the row after the anchor colored blue, when the output only includes one of the blue lines ($150)?
- Why didn't `"tiebreaker": "second"` select $250 instead of $150, since $250 is the second line after the anchor (the first line is just a bunch of dots, "............")?

Here are some answers:

- Sensible shows you the entire scope of the method match, not just what the method outputs. So the method matches *all* the elements in the row after the anchor, but then narrows down the actual output to $150 using `"tiebreaker": "second"`. Seeing the entire method match in the app can help you troubleshoot unexpected output.
- `"tiebreaker": "second"` evaluates *after* the datatype we set in the field, `"type": "currency"`.  So, instead of looking for the second line after the anchor in general, it looks for the second line *that contains a currency*.  There are two such lines, $250 and $150, and $150 is the second one. Convenient, right? 


Box method
----

To grab the policy number, the config uses the [Box method](doc:box). This tells SenseML the following:

  - The anchor is inside a box (`"id": "box"`).

  - Match on the anchor text "policy number". Notice that the anchor line is a little more complex than previous examples. We define the match type (`"type": "startsWith"`) as well as the text match  (`"text": "policy number"`). Notice you can write a simpler anchor as `"anchor":"policy number"`, or you can expand to complex anchors. For more information, see [Anchor object](doc:anchor-object).

    

    

For this box:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_box.png)

The config uses this Field query:

```json
      {
        "id": "policy_number",
        "anchor": {
          "match": [
            {
              "text": "policy number",
              "type": "startsWith"
            }
          ]
        },
        "method": {
          "id": "box",
        }
      },
```

  Which returns: 

```json
  {
  	"policy_number": {
  		"type": "string",
  		"value": "123456789"
  	}
  }
```

Notice that SenseML  grabs the box contents, but not the anchor itself. In general, SenseML returns methods results, not anchor results (unless you define a [Passthrough method](doc:passthrough)).  Similarly, most SenseML methods ignore the anchor line (the line containing the anchor text) and do not include it in the output. One notable exception to this general rule is the Label method, which can match text in the anchor line that is to the left or right of the anchor text (`"position":"left"` or `"position":"right"`).

Advanced queries
----

You can get more advanced with this auto insurance config. For example:

- You can use a [Column method](doc:column) to return all the listed premiums ($90, $15, $130).
- The limits listed in the table (for example, "$25,00 each person/$50,000 per accident") are tricky for the Row method since they can be a variable number of lines. Row methods depend on strict x-axis alignment of lines, so you'd only be able to grab the first line. Instead, you can use the [Table method](doc:table) to more reliability capture the data in each cell of the whole table. Or, use an `xRangeFilter` parameter in the [Document Range method](doc:document-range) to capture the limits.
- What if the document listed multiple emails, and you just wanted to capture all those emails? You could use a regular expression (regex) in your anchor coupled with a [Passthrough method](doc:passthrough), or the [Regex method](doc:regex).

We'll save these and other techniques for a later tutorial!  To check out other methods, see [Methods](doc:methods).

Sanity test the config
====

Before integrating the config with an application and writing tests against it, let's sanity test the config by uploading another quote.

1. Repeat the steps in the previous section to upload a second generic car insurance quote:

    [auto_insurance_anyco_golden_2](https://github.com/sensible-hq/sensible-docs/blob/main/readme-sync/assets/pdfs/auto_insurance_anyco_golden_2.pdf)

2. Click the **anyco** config, select the "auto_insurance_anyco_golden_2" PDF, and look at the output:

   Uh oh! It looks like this policy period spills over onto the next line, so we miss the end year (2021). That seems like sloppy PDF formatting, but let's work with it. 

   ![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_error_1.png)

How can you capture the policy period reliably? As you become more familiar with SenseML, you might guess you'd use a Document Range method, which grabs multiple lines of text, like paragraphs, after an anchor.

But nope, this PDF doesn't fit neatly into the Document Range method, because the first line we want is also part of the anchor (the orange box). As a result, the Document Range leaves out the first line of the period and only grabs the year in the method match (the blue box):

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_error_2.png)





There are multiple ways to tackle this problem. Here's one way: you can a [Region method](doc:region). A region is rectangular space defined by coordinates relative to the label. 

Replace your existing policy_period field with the following field in the editor:

```json
    {
      "id": "policy_period",
      "anchor": {
        "match": [
          {
            "text": "policy period",
            "type": "startsWith"
          }
        ]
      },
      "method": {
        "id": "region",
        "offsetX": -0.1,
        "offsetY": -0.1,
        "width": 3.5,
        "height": 0.45,
        "start": "left",
        "wordFilters": [
          "policy period",
        ]
      }
    },
```

This field defines a region in inches relative to the anchor, and since the region overlaps the anchor, it uses `wordFilters` to remove the anchor text in the output. See the green box in the editor? This box dynamically resizes as you adjust the region parameters (such as `height` and `start`), so you can visually tweak the region till you're satisfied. 

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_error_3.png)



Let's double check that this region also works with our first PDF:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_error_4.png)

Yes, it does. If you're feeling picky, try resizing the region using the green box for visual feedback, until the lower edge of the box doesn't overlap the customer service line in the first PDF (auto_insurance_anyco_golden_1.pdf). But even if you don't fiddle with the region size, you can rest easy -- the Region method only captures lines that are completely contained in the region. 

3. Click **Publish** to save your changes to the config.

In a production scenario, continue testing PDFs until you're confident your configs will work with the PDF document type you've defined. 

Integrate with your application
====

When you're satisfied with your config, use the [Sensible API](https://docs.sensible.so/reference) to integrate with your application. 

**Test the extraction API**

First, make sure you can extract data using the config and PDF you created in previous steps:

1.  In your local file system, locate the the example [generic car insurance quote](https://github.com/sensible-hq/sensible-docs/blob/main/readme-sync/assets/pdfs/auto_insurance_anyco_golden.pdf) you downloaded in a previous step. For this example, use something like this to extract data:

```curl
curl --request POST \
  --url https://api.sensible.so/v0/extract/auto_insurance_quote \
  --header 'Authorization: Bearer YOUR_API_KEY' \
  --header 'Content-Type: application/pdf' \
  --data-binary '@/PATH_TO_DOWNLOADED_PDF/auto_insurance_anyco_golden.pdf'

```
2. **Important!** Remember to click **Publish** in the Sensible app to publish your config, or this request won't work:  

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_publish_config.png).

3. For an easy way to run this cURL request, download the [Postman](https://www.postman.com/) desktop app. In the Postman desktop app, click **File**>**Import** and select **Raw text**.
4. Copy the previous code sample into the raw text field in Postman. Replace `YOUR_API_KEY` with your API key.
5. Correct the path to your downloaded PDF:
   -  **If you're in the command line:** Replace `PATH_TO_DOWNLOADED_PDF` with the local directory path to the PDF.
   -  **If you're in Postman:** In the request, click the **Body** tab, select **binary**, then click **Select file** and select your PDF:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/images/v0/quickstart_postman_1.png)

â€‹    

5. Click **Send**, and you should see a response like this:

```json
{
    "id": "b0ac180d-55d2-4946-80c0-a87243319746",
    "created": "2021-05-20T18:02:37.019Z",
    "status": "COMPLETE",
    "type": "auto_insurance_quote",
    "parsed_document": {
        "policy_number": {
            "type": "string",
            "value": "123456789"
        },
        "policy_period": {
            "type": "string",
            "value": " April 14, 2021 - Oct 14, 2021"
        },
        "comprehensive_premium": {
            "source": "$150",
            "value": 150,
            "unit": "$",
            "type": "currency"
        }
    }
}
```



 :information_source: **Note:** You don't have to specify the config you created (`anyco`) in this call. Sensible looks at all the configs for the document type you made in this quickstart (`auto_insurance_quote`), and **automatically** chooses the one that fits best! 

Now you can use the [Sensible API](https://docs.sensible.so/reference) to generate upload and download URLs for multiple car insurance quote PDFs,  retrieve results, and integrate with your application!  







