---
title: "Box"
hidden: false

---

Extract lines inside a box. This method works by default with boxes that have a light background and dark, continuous borders. 

[**Parameters**](doc:box#parameters)
[**Examples**](doc:box#examples)

Parameters
====

**Note:** For the full list of parameters available for this method, see [Global parameters for methods](doc:method#global-parameters-for-methods). The following table only shows parameters most relevant to or specific to this method.

| key               | value                                                        | description                                                  |
| ----------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| id (**required**) | `box`                                                        | Extracts all lines in a box. If you define an anchor that's outside the box borders, then use offset parameters to define a point that's inside the box borders so that Sensible recognizes the box. |
| position          | `right`, `left`, `below`, `above`. default: center of the anchor line's bounding box | Use this parameter to fine tune box recognition. The Position parameter defines a starting point for recognizing a box. Sensible searches outward from this point until dark pixels signifying the box border are found. <br/> For an example of how to use this parameter, see the following [Examples section](doc:box#examples). |
| offsetX           | number in inches default: 0                                  | Searches for a box starting at a point offset horizontally from the point defined by the Position parameter. You can use offset X and Y coordinates as an alternative to the Offset Boxes parameter. For an example of how to use this parameter, see the following [Examples section](doc:box#examples). |
| offsetY           | number in inches default: 0                                  | Searches for a box starting at a point offset vertically from the point defined by the Position parameter. You can use offset X and Y coordinates as an alternative to the Offset Boxes parameter. For an example of how to use this parameter, see the following [Examples section](doc:box#examples). |
| offsetBoxes       | object. default: `none`                                      | Recognize a box separated by offsetting boxes from the point defined in the Position parameter. For example, use this parameter for tables or grids where continuous borders surround every cell. The boxes must share borders. Contains the following parameters:<br/>\- `direction`: The direction to search in (`above, below, right, left`, relative to the starting box.<br/>\- `number`: The number of boxes to offset by.<br/>For an example of how to use this parameter, see the following [Examples section](doc:box#examples). |
| darknessThreshold | number between 0 and 1. default: 0.9                         | The brightness threshold below which to consider a pixel a box boundary (white is 1.0). Configure this parameter when you have a box with a dark background. For an example of how to use this parameter, see the following [Examples section](doc:box#examples). |

Examples
====

Simple box
----

The following example shows extracting a dollar amount from a box in a 1099 form, based on anchor text matching in the box.

**Config**

```json
{
 "fields": [
   {
     "id": "rents_income",
     "type": "currency",
     "method": {
       "id": "box",
     },
     "anchor": "rents"
   }
 ]
}
```

**PDF**
The following image shows the example PDF used with this example config:

![Click to enlarge](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/images/final/box_1099.png)



| Example PDF | [Download link](https://www.irs.gov/pub/irs-pdf/f1099msc.pdf) |
| ----------- | ------------------------------------------------------------ |

**Output**

```json
{
  "rents_income": {
    "source": "4,200",
    "value": 4200,
    "unit": "$",
    "type": "currency"
  }
}
```




Dark box
----

The following example shows extracting text from a box with a dark background and light text using the `darknessThreshold` parameter.


**Config**

```json
{
  "fields": [
    {
      "id": "dark_box",
      "method": {
        "id": "box",
        "darknessThreshold": 0.8
      },
      "anchor": "dark box with light text",
    }
  ]
}
```

**PDF**
The following image shows the example PDF used with this example config:

![Click to enlarge](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/images/final/box_dark.png)



| Example PDF | [Download link](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/pdfs/box_dark.pdf) |
| ----------- | ------------------------------------------------------------ |

**Output**

```json
{
  "dark_box": {
    "type": "string",
    "value": "Here’s some more text"
  }
}
```



Offset boxes
----

The following example shows recognizing boxes relative to other boxes using the Box Offset parameter.

**Config**

```json
{
  "fields": [
    {
      "id": "auto_limit_in_policy_1",
      "anchor": "auto only",
      "match": "first",
      "method": {
        "id": "box",
        "offsetBoxes": {
          "direction": "right",
          "number": 1
        }
      }
    },
    {
      "id": "injury_limit_in_policy_2",
      "anchor": "dollar amount",
      "match": "last",
      "method": {
        "id": "box",
        "offsetBoxes": {
          "direction": "below",
          "number": 2
        }
      }
    },
    {
      "id": "offset_boxes",
      "anchor": "spanning multiple",
      "method": {
        "id": "box",
        "offsetBoxes": {
          "direction": "below",
          "number": 3
        }
      }
    },
  ]
}
```

**PDF**

The following image shows the example PDF used with this example config:

![Click to enlarge](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/images/final/box_offset.png)

| Example PDF | [Download link](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/pdfs/box_offset.pdf) |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |

**Output**

```
{
  "auto_limit_in_policy_1": {
    "type": "string",
    "value": "$2,000"
  },
  "injury_limit_in_policy_2": {
    "type": "string",
    "value": "$4,000"
  },
  "offset_boxes": {
    "type": "string",
    "value": "Third offset box"
  }
}
```



The boxes in the following image illustrate how Sensible recognizes offset boxes after the first box:

![Click to enlarge](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/images/final/box_offset_2.png)

1. Recognize the starting box by searching for the dark borders of the box. The search starts at the green dot defined by the Position parameter. The search expansion is in all directions, not just the cardinal directions shown by the red arrows in the image.
2. Find a bottom border (`"direction": "below"`) that's shared with the next box. Choose a point ( represented as the second green dot) on the bottom border that's in the middle of the starting box's border and that's just inside the next box's borders.
3. Search from that point  to recognize the next box's borders.
4. repeat steps 2 and 3 for the next box, and so on.

When boxes are complex (inconsistently sized, spanned, or aligned, as in the preceding image), Sensible's  methods for recognizing boxes can be correspondingly complex. In such cases, use the Sensible app to [visually examine](doc:ui-guide) and understand the extraction. Or, see the following example for an alternative approach. 

Box coordinates
----

You can use the Offset X and Offset Y parameters as an alternative to the Offset Boxes parameter. Offsets are faster in terms of performance, but are more sensitive to inconsistent box positioning across PDFs and require more configuration. 

The following example shows the same PDF as the Offset Boxes example, but uses distances in inches rather than boxes to define the offsets.



**Config**

```json
{
  "fields": [
    {
      "id": "auto_limit_in_policy_1",
      "anchor": "auto only",
      "match": "first",
      "method": {
        "id": "box",
        "offsetX": 1.5,
        "offsetY": 0.0
      }
    },
    {
      "id": "injury_limit_in_policy_2",
      "anchor": "dollar amount",
      "match": "last",
      "method": {
        "id": "box",
        "offsetX": 0.0,
        "offsetY": 1.0
      }
    },
    {
      "id": "oddly_formatted_boxes",
      "anchor": "spanning multiple",
      "method": {
        "id": "box",
        "offsetX": 1.0,
        "offsetY": 2.5
      }
    },
  ]
}
```

**PDF**

The following image shows the example PDF used with this example config:

![](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/images/final/box_offset_3.png)

| Example PDF | [Download link](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/pdfs/box_offset.pdf) |
| ------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |

The red arrows in the preceding image show the offsets in inches from the point defined by the Position parameter. The green dots move as you adjust the inches coordinates, so you can visually tweak your measurements in the Sensible app.

**Output**

```json
{
  "auto_limit_in_policy_1": {
    "type": "string",
    "value": "$2,000"
  },
  "injury_limit_in_policy_2": {
    "type": "string",
    "value": "$6,000"
  },
  "oddly_formatted_boxes": {
    "type": "string",
    "value": "Third offset box"
  }
}
```

Troubleshoot box recognition
----

Use the Position parameter to fine tune box recognition.

**PROBLEM**

In the following error example, Sensible searches for borders starting from the middle point of the anchor line's left boundary  (`"position": "left"`). Since the point (the green dot) overlaps the box border, Sensible can't recognize the box.

Config

```json
{
  "fields": [
    {
      "id": "box_test",
      "anchor": "big anchor text",
      "method": {
        "id": "box",
        "position": "left",
        "wordFilters": [
          "cramped"
        ]
      }
    }
  ]
}
```

 PDF

The following image shows the example PDF used with this example config:

![Click to enlarge](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/images/final/box_position_left.png)

| Example PDF | [Download link](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/pdfs/box_recognition.pdf) |
| ------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |

**SOLUTION**

If you specify `"position": "right"`, the green dot is far enough inside the borders that Sensible  recognizes the box:

Config

```json
{
  "fields": [
    {
      "id": "box_test",
      "anchor": "big anchor text",
      "method": {
        "id": "box",
        "position": "right",
        "wordFilters": [
          "cramped"
        ]
      }
    }
  ]
}
```

PDF

![Click to enlarge](https://raw.githubusercontent.com/sensible-hq/sensible-docs/main/readme-sync/assets/v0/images/final/box_position_right.png)

Output

```json
{
  "box_test": {
    "type": "string",
    "value": " with some text to extract"
  }
}
```

Notes
====

The Box method is similar to the [Region method](doc:region), but requires less configuration and is slightly slower. Use the Region method instead of the Box method for faster performance, or if the borders of a box are incomplete or discontinuous.